<canvas id="siteBg" class="site-bg" aria-hidden="true"></canvas>

<style>
  .site-bg{
    position: fixed;
    inset: 0;
    width: 100%;
    height: 100%;
    z-index: -1;           /* âœ… behind all content */
    opacity: 0.55;
  }
</style>

<script is:inline>
  const canvas = document.getElementById("siteBg");
  const ctx = canvas.getContext("2d");

  let w=0, h=0, dpr=1;
  const mouse = { x: 0, y: 0, active: false };

  function resize(){
    dpr = Math.max(1, devicePixelRatio || 1);
    w = innerWidth; h = innerHeight;
    canvas.width = Math.floor(w * dpr);
    canvas.height = Math.floor(h * dpr);
    ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
  }

  const N = 95;
  const pts = Array.from({length:N}, () => ({
    x: Math.random(),
    y: Math.random(),
    vx: (Math.random()-0.5)*0.18,
    vy: (Math.random()-0.5)*0.18,
    r: 1.0 + Math.random()*1.8
  }));

  function frame(){
    ctx.clearRect(0,0,w,h);

    // soft background glow
    const g = ctx.createRadialGradient(w*0.55, h*0.25, 60, w*0.55, h*0.25, Math.max(w,h));
    g.addColorStop(0, "rgba(255,255,255,0.10)");
    g.addColorStop(1, "rgba(0,0,0,0)");
    ctx.fillStyle = g;
    ctx.fillRect(0,0,w,h);

    for (const p of pts){
      if (mouse.active){
        const px = p.x * w, py = p.y * h;
        const dx = mouse.x - px, dy = mouse.y - py;
        const dist = Math.sqrt(dx*dx + dy*dy) || 1;
        const pull = Math.max(0, 190 - dist) / 190;
        p.vx += (dx/dist) * pull * 0.0007;
        p.vy += (dy/dist) * pull * 0.0007;
      }

      p.x += p.vx/60; p.y += p.vy/60;
      if (p.x<0) p.x=1; if (p.x>1) p.x=0;
      if (p.y<0) p.y=1; if (p.y>1) p.y=0;
      p.vx *= 0.988; p.vy *= 0.988;
    }

    for (let i=0;i<pts.length;i++){
      const a=pts[i], ax=a.x*w, ay=a.y*h;
      ctx.beginPath();
      ctx.arc(ax,ay,a.r,0,Math.PI*2);
      ctx.fillStyle="rgba(255,255,255,0.60)";
      ctx.fill();

      for (let j=i+1;j<pts.length;j++){
        const b=pts[j], bx=b.x*w, by=b.y*h;
        const dx=bx-ax, dy=by-ay;
        const dd=dx*dx+dy*dy;
        const max=130*130;
        if (dd<max){
          const alpha = 0.16*(1-dd/max);
          ctx.strokeStyle = `rgba(255,255,255,${alpha})`;
          ctx.beginPath();
          ctx.moveTo(ax,ay);
          ctx.lineTo(bx,by);
          ctx.stroke();
        }
      }
    }
    requestAnimationFrame(frame);
  }

  addEventListener("resize", resize);
  addEventListener("mousemove", (e)=>{ mouse.x=e.clientX; mouse.y=e.clientY; mouse.active=true; }, {passive:true});
  addEventListener("mouseleave", ()=>{ mouse.active=false; });

  resize();
  frame();
</script>
